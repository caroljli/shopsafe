<div *ngIf="isLoaded && !httpError" id="result" class="segment">
    <div class="segment-text">
        <div class="heading-text">
            <h1>{{ location }}</h1>
            <p>Showing all grocery stores for your location. The map is centered to your current location.</p>
            <p><button class="maps-button" (click)="recenterMap(result.latLng.latitude, result.latLng.longitude)"><i class="fas fa-location-arrow"></i> &nbsp; RECENTER MAP</button></p>
        </div>
        <div id="map">
          <google-map
            height="500px"
            width="100%"
            [zoom]="14"
            [center]="center"
            [options]="options"
          >
            <map-marker
              *ngFor="let marker of markers"
              [position]="marker.position"
              [title]="marker.title"
              [options]="marker.options"
            >
            </map-marker>
          </google-map>
        </div>
        <br/>
        <div class="stores-list-heading">
            <h2 class="left-text">Local Grocery Stores</h2>
            <p class="right-text subtext">
              Click on a store to view store statistics, click on the &nbsp; <i class="fas fa-map-marker-alt" style="color:#68BBCF"></i> &nbsp; to view on map
            </p>
        </div>
        <div class="stores-list" *ngFor="let store of result.stores">
            <div class="stores-list-item">
              <div class="row">
                <div class="left-text markers">
                    <a class="location-icon" (click)="recenterMap(store.latitude, store.longitude)"><i class="fas fa-map-marker-alt"></i></a> &nbsp;
                    <a 
                        class="stores-list-location" 
                        [routerLink]="['/store', store.id]"
                    >
                        {{ store.name }}
                    </a>
                    <!-- <a class="rating">{{ store.score | round }}/10</a> -->
                </div>
                <div class="right-text">
                    <p class="address">{{ store.address }}</p>
                </div>
              </div>
              <br/>
              <hr/>
              <div class="row">
                <div class="right-text">
                  <a class="tag">{{ store.distance | round }} mi</a>
                  <a class="tag">
                    {{ store.rating ? ( store.rating | round ) : 'â€”' }}/5 &nbsp;
                    <a class="tooltip"
                      matTooltip="Google Review">
                      <i class="far fa-question-circle"></i>
                    </a>
                  </a>
                  <a class="rating">{{ store.score | round }}/10</a>
                </div>
              </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="!isLoaded && !httpError" class="loading-screen">
  <mat-spinner></mat-spinner>
  <br/>
  <p>Fetching Results...</p>
</div>

<app-http-error *ngIf="httpError" [httpErrorMessage]='httpErrorMessage'></app-http-error>