<div *ngIf="isLoaded && !httpError" id="store" class="segment">
    <div class="segment-text">
        <div class="heading-text">
            <a class="back-link" (click)="goBack()"><i class="fas fa-long-arrow-alt-left"></i> &nbsp; Back to Results</a>
            <br/>
            <h1>{{ store.name }}</h1>
            <p>
                {{ store.address }} &nbsp; &nbsp; 
                <a class="maps-button" (click)="redirectToMap()">VIEW ON MAPS</a>
            </p>
        </div>
        <div class="stat-bar-wrapper">
            <div class="stat-bar">
                <div class="stat-elem">
                    <a class="stat-obj">CHECKED IN</a>
                    <p>{{ store.checkInCount }}</p>
                </div>
                <div class="stat-elem" style="text-align: center;">
                    <a class="stat-obj">STATUS</a>
                    <p [ngStyle]="{'color': (store.open) ? '#7AC665' : '#FF5151'}"><b>{{ store.open ? 'OPEN' : 'CLOSED' }}</b></p>
                </div>
                <div class="stat-elem" style="text-align: right; margin-top: -5px">
                    <a class="stat-obj">SHOPSAFE SCORE</a>
                    <p class="shopsafe-score">{{ store.score | round }}/10</p>
                </div>
            </div>
        </div>
        <button id='check-in-button' (click)="openModal()">CHECK IN AT THIS STORE</button>
        <div class="stat-bar-wrapper">
          <h2>Check-In Statistics for {{ store.name }}</h2>
          <p>Chart statistics represent check-in entries averaged per day. To view more about the statistics, try clicking the check-in button!</p>
        </div>
        <div id="line-chart" class="chart">
          <app-line-chart [mask]='maskData' [busy]='busyData' [line]='lineData' [hygiene]='hygieneData'></app-line-chart>
        </div>
        <div class="stat-bar-wrapper">
            <h2>Statistics for {{ countyStats.countyName }} County</h2>
            <div class="stat-bar">
                <div class="stat-elem">
                    <a class="stat-obj">TOTAL CASES</a>
                    <p>{{ countyStats.cases }}</p>
                </div>
                <div class="stat-elem" style="text-align: center;">
                    <a class="stat-obj">TOTAL DEATHS</a>
                    <p>{{ countyStats.deaths }}</p>
                </div>
                <div class="stat-elem" style="text-align: right; margin-top: -5px">
                    <a class="stat-obj">PERCENT AFFECTED</a>
                    <p class="shopsafe-score">{{ proportion | round }}%</p>
                </div>
            </div>
        </div>
        <div id="covid-chart" class="chart">
          <app-covid-chart></app-covid-chart>
        </div>
    </div>
</div>

<div *ngIf="!isLoaded && !httpError" class="loading-screen" color="grey">
  <mat-spinner></mat-spinner>
  <br/>
  <p>Loading Store...</p>
</div>

<app-http-error *ngIf="httpError" [httpErrorMessage]='httpErrorMessage'></app-http-error>